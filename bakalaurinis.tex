\documentclass{VUMIFInfBakalaurinis}
\usepackage{algorithmicx}
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{bm}
\usepackage{caption}
\usepackage{color}
\usepackage{float}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{subfig}
\usepackage{url}
\usepackage{wrapfig}

\usepackage{longtable}
\usepackage{rotating}

\usepackage{amsbsy}

\usepackage{hyperref} %[pdfpagelabels,bookmarks,hyperindex,hyperfigures]

%\definecolor{mygray}{rgb}{0.5,0.5,0.5}
%\lstset{ %
%  numbers=left,                    	% where to put the line-numbers;
%  numbersep=5pt,                   	% how far the line-numbers are from the code
%  numberstyle=\tiny\color{mygray}, 	% the style that is used for the line-numbers 
%  breaklines=true,                 	% sets automatic line breaking
%  frame=single,	                   	% adds a frame around the code
%  morekeywords={of,in},				% if you want to add more keywords to the set
%  tabsize=2	                   		% sets default tabsize to 2 spaces
%}

%if errors .aux, .toc

\hypersetup{
    bookmarks=true,         % show bookmarks bar?
    %unicode=false,          % non-Latin characters in Acrobat’s bookmarks
    %pdftoolbar=true,        % show Acrobat’s toolbar?
    %pdfmenubar=true,        % show Acrobat’s menu?
    %pdffitwindow=false,     % window fit to page when opened
    %pdfstartview={FitH},    % fits the width of the page to the window
    pdftitle={Dalykinės srities modelio transformavimas į UML užduočių diagramas},    % title
    pdfauthor={Aleksandras Sivkovas},     % author
    hidelinks
}

%\definecolor{dkgreen}{rgb}{0,0.6,0}
%\definecolor{gray}{rgb}{0.5,0.5,0.5}
%\definecolor{mauve}{rgb}{0.58,0,0.82}
%\definecolor{light-gray}{gray}{0.25}
%keywordstyle=\bfseries\color{blue},
%  commentstyle=\itshape\color{dkgreen},
%  stringstyle=\color{mauve},

\lstdefinestyle{pseudocode}{
  language=Java,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\normalsize\ttfamily},
  numberstyle={\tiny},
  numbers=left,
  keywordstyle=\pmb,
  commentstyle=\itshape,
  stringstyle=\itshape,
  breaklines=true,
  breakatwhitespace=true,
  tabsize=2,
  morekeywords={of,in,function},
  escapeinside={(*}{*)},          % if you want to add LaTeX within your code
  frame=single	                   	% adds a frame around the code
}

%%% Table of contents to list down to subsections and no further
\setcounter{tocdepth}{4}
 
%%% Number down to subsubsections only
\setcounter{secnumdepth}{4}

% Titulinio aprašas
\university{Vilniaus universitetas}
\faculty{Matematikos ir informatikos fakultetas}
\department{Programų sistemų katedra}
\papertype{Baigiamasis bakalauro darbas}
\title{Dalykinės srities modelio transformavimas į UML užduočių diagramas}
\titleineng{Deriving use cases from business process}
\status{4 kurso 1 grupės studentas}
\author{Aleksandras Sivkovas}
% \secondauthor{Vardonis Pavardonis}   % Pridėti antrą autorių
\supervisor{Prof. dr. Saulius Gudas}
\reviewer{prof. habil. dr. Vardaitis Pavardaitis}
\date{Vilnius \\ \the\year}

% Nustatymai
% \setmainfont{Palemonas}   % Pakeisti teksto šriftą į Palemonas (turi būti įdiegtas sistemoje)
\bibliography{bibliografija} 

\begin{document}

\newcounter{counter:table:reset}
\newcounter{counter:table}[counter:table:reset]
\newcommand\rownumber{\stepcounter{counter:table}\arabic{counter:table}}

\maketitle

\tableofcontents




%Įvade apibūdinamas darbo tikslas, temos aktualumas ir siekiami rezultatai.
\sectionnonum{Įvadas}

Reikalavimų inžinerija yra sudėtinga programų kūrimo dalis. Proceso sudėtingumas dažnai tampa klaidų priežastimi. Čia atsiradusios klaidos sunkiai aptinkamos ir sukelia brangiai kainuojančias pasekmes, nes sekančiuose etapuose bus kuriama neteisingai apibrėžta programa. Norint išvengti klaidų galima kai kurias proceso veiklas automatizuoti. Nors yra daug modeliavimo įrankių, juose trūksta automatinio vieno modelio generavimo iš kito.

Projektuojant sistemą gali atsitikti toks atvejis (\ref{img:bad_model_use_cases} pav.). Čia pavaizduota, kad analitikas aptiko kokias funkcijas reikia įgyvendinti. Analizuodamas \ref{img:bad_model} pav. pavaizduotą veiklą jis aptiko vartojimo atvejus pažymėtus 1, 2, 3, 5. Taigi nuspręsta kurti sistemą pavaizduotą  \ref{img:bad_model_use_cases} pav. 

\begin{figure}[H]
	\centering
	\includegraphics[width=\textwidth]{img/bad_modeling/bad_model}
	\caption{Veiklos modelio pavyzdys}
	\label{img:bad_model}
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[width=15cm]{img/bad_modeling/bad_model_use_cases}
	\caption{Vartojimo atvejų diagramos sukurtos pagal \ref{img:bad_model} pav. veiklą pavyzdys}
	\label{img:bad_model_use_cases}
\end{figure} 

Bet vėliau paaiškėjo, kad norint įgyvendinti veiklą pažmėtą 5 kartais reikia duomenų iš 4 veiklos pažymėtos punktyrine linija (\ref{img:corrected_model} pav.). Taigi vartojimo atvejų diagramoje trūko 4 vartojimo atvejo (\ref{img:corrected_model_use_cases} pav.). Analitikas to nepastebėjo ir įvyko projektavimo klaida apie kurią niekas nesužinojo.

\begin{figure}[H]
	\centering
	\includegraphics[width=\textwidth]{img/bad_modeling/corrected_model}
	\caption{Pataisyto veiklos modelio pavyzdys}
	\label{img:corrected_model}
\end{figure}
\begin{figure}[H]
	\centering
	\includegraphics[width=15cm]{img/bad_modeling/corrected_model_use_cases}
	\caption{Vartojimo atvejų diagramos sukurtos pagal \ref{img:corrected_model} pav. pavyzdys}
	\label{img:corrected_model_use_cases}
\end{figure}

Sumažinti klaidų kiekį galima užrašant turimus duomenis ir automatiškai generuojant modelius. Generavimo įrankis galėtų patikrinti ar įvesties duomenys atitinka keliamus reikalavimus. Taip bus parodyti netikslumai ir analitikas galės pakoreguoti modelį.

Šio darbo tikslas – sukurti algoritmą \textbf{BPMN} modelio transformacijai į \textbf{užduočių diagramas} ir įgyvendinti programos prototipą. \textbf{Užduočių diagramos} yra svarbi reikalavimų inžinerijos dalis, kadangi ji apibrėžia naudotojo reikalavimus. Įmonės dažniausiai žino kaip ir kokias veiklas jos vykdo. Verslo procesą galima apibrėžti \textbf{BPMN} diagramomis. Bet ne viską, kas yra \textbf{BPMN} modelyje, galima perkelti į \textbf{užduočių diagramą}, todėl darbe bus apibrėžtas modifikuotas \textbf{BPMN} modelis, kuriame bus vaizduojama tik algoritmui aktuali informacija. Taip pat gali tekti pridėti papildomų atributų, kurie padės pasiekti tikslesnius rezultatus. Čia bus tiriamas \textbf{BPMN} modelio transformacijos į \textbf{užduočių diagramas} algoritmas.

Siekiami rezultatai yra:
\begin{enumerate}
	\item Algoritmas galintis transformuoti \textbf{BPMN} modelį į \textbf{užduočių diagramą}(angl. Use case diagram).
	\item Programa demonstruojanti algoritmo veikimą.
\end{enumerate}


%Pagrindinėje tiriamojoje dalyje aptariama ir pagrindžiama tyrimo metodika;
%pagal atitinkamas darbo dalis, nuosekliai, panaudojant lyginamosios analizės,
%klasifikacijos, sisteminimo metodus bei apibendrinimus, dėstoma sukaupta ir
%išanalizuota medžiaga. 
\section{\textbf{BPMN} diagrama}
Norint standartizuoti verslo modelių atvaizdavimą 2004 metais organizacija BPMI išleido BPMN 1.0 specifikaciją. Ji leido tiek vaizduoti esamus, tiek apsikeisti kuriamų procesų reikalavimais. BPMN greitai išpopuliarėjo tarp vadybininkų, verslo analitikų ir programuotojų, nes pasiūlė pažįstamą verslo procesų atvaizdavimą ir turėjo matematinį pagrindą. Vėliau BPMI susijungė su \textbf{OMG} ir 2013 metais buvo išleista BPMN 2.0 versija, kurioje BPMN įgavo geresnį skaitomumą, lankstumą ir išplečiamumą.

\subsection{\textbf{BPMN} apimtis}
BPMN specifikacija standartizuoja verslo procesų modelį,jų atvaizdavimo būdą ir duomenų apsikeitimo formatą perduoti tiek modelį, tiek jo atvaizdavimą. Sutelkti dėmesiui į skirtingas proceso dalis pateikiami procesų ir choreografijos submodeliai. Bendradarbiavimo submodelis, į save įtraukiantis kitus, gali būti naudojamas pateikti iš karto viskam. Specifikacijos apimtis yra verslo procesai taigi dalykai kaip strategija, duomenų struktūros, resursai, taisyklės ir įstatymai neįeina į ją. 
 
\subsection{\textbf{BPMN} komponentai} \label{section:bpmn_components}
\textbf{BPMN} specifikacija leidžia atvaizduoti gana nemažai verslo proceso atributų \cite{bpmnFormal}. Specifikacijoje jie yra suskirstyti į pagrindinius ir išvestinius. Toliau pateikiami pagrindiniai \textbf{BPMN} komponentai.

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/bpm-components/pool}
	\caption{Juostos žymėjimo pavyzdys}
	\label{img:bpm_components_pool}
\end{figure}

Juosta (pool) žymi diagramos dalyvį. Šio komponento paskirtis yra parodyti už kokias veiklas ir koks vykdytojas yra atsakingas. Juosta gali būti skaidoma smulkiau norint konkrečiau nurodyti vykdytojų grupes ir jų pareigas, tuomet ji gali būti vadinama linija (lane). Juosta žymima apibraukiant tam tikrą sritį (\ref{img:bpm_components_pool} pav.). Viduje yra vieta komponentams už kurių atlikimą atsakingas dalyvis.

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/bpm-components/event_types}
	\caption{Įvykio žymėjimo pavyzdys}
	\label{img:bpm_event_types}
\end{figure}

Įvykis (event) žymi, kad įvyko kažkas, kas įtakojo proceso būseną. Šis komponentas dažniausiai turi priežastį (trigger) dėl ko jis įvyko ir pasekmes (result). Specifikacijoje įvykiai skirstomi į tris tipus: pradžios (\ref{img:bpm_event_types} pav. a), pabaigos (\ref{img:bpm_event_types} pav. b) ir tarpinius (\ref{img:bpm_event_types} pav. c). Žymėjimas yra tuščias apskritimas (\ref{img:bpm_event_types} pav.), viduje paliekant vietos tipo konkretizavimui.

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/bpm-components/activity}
	\caption{Veiklos žymėjimo pavyzdys}
	\label{img:bpm_components_activity}
\end{figure}

Veikla (Activity) yra darbas atliekamas organizacijos procesuose. Ji gali būti atominė ir turėti tik pavadinimą arba  skaidoma labiau, tokiu būdu tapdama subprocesu. Visais atvejais žymėjimas yra stačiakampis su užapvalintais kampais (\ref{img:bpm_components_activity} pav.).

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/bpm-components/transition}
	\caption{Sekos srauto žymėjimo pavyzdys}
	\label{img:bpm_components_sequence_flow}
\end{figure}

Sekos srautas (Sequence Flow) žymi veiklų seką. Jeigu nenurodyta lygiagretumo veiklos modelyje vykdomos iš eilės. Šis komponentas parodo kokia tvarka tai vyks. Jį galima apibūdinti kaip grafo su kryptimis briauna, kryptis parodo kuri veikla turi būti įvykdyta vėliau. Sekos srautas žymimas solidžia linija ir užpildyto trikampio formos rodykle parodančia kryptį (\ref{img:bpm_components_sequence_flow} pav.).

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/bpm-components/gateway}
	\caption{Sprendimo žymėjimo pavyzdys}
	\label{img:bpm_components_gateway}
\end{figure}

Sprendimas (gateway) gali būti įterptas sekos srautuose tarp veiklų. Jis žymi srautų išsišakojimą arba susijungimą. Šis komponentas parodo, kad priklausomai nuo konkretaus proceso būsenos bus vykdomos veiklos į kurias eina sekos srautai atitinkantys sprendimo sąlygas. Žymėjimas yra kvadratas pasuktas 45 laipsniu kampu (\ref{img:bpm_components_gateway} pav.). Viduje yra vieta sprendimo konkretizavimui.

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/bpm-components/data_object}
	\caption{Duomenų objekto žymėjimo pavyzdys}
	\label{img:bpm_components_data_object}
\end{figure}

Duomenų objektas (data Object) pateikia informaciją apie tai kokių duomenų reikalauja veiklos vykdytojas norėdamas ją atlikti ir kokie duomenys pagaminami po jos vykdymo. Komponentas gali žymėti tiek neskaidomus tiek sudėtinius duomenis. Jis vaizduojamas (\ref{img:bpm_components_data_object} pav.) kaip stačiakampis su nukirptu dešiniuoju viršutiniu kampu ir trikampiu prie jo (arba kaip stačiakampis lapas su užlenktu dešiniuoju viršutiniu kampu). 

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/bpm-components/message}
	\caption{Pranešimo žymėjimo pavyzdys}
	\label{img:bpm_components_message}
\end{figure}

Pranešimas (message) žymi bendravimą tarp dalyviu. Šis komponentas skirtas apibrėžti perduodamai informacijai tarp jų. Vaizduojamas (\ref{img:bpm_components_message} pav.) stačiakampiu su trikampiu viduje (vokas).

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/bpm-components/message_flow}
	\caption{Pranešimų srauto žymėjimo pavyzdys}
	\label{img:bpm_components_message_flow}
\end{figure}

Pranešimų srautas (Message flow) žymi duomenų perdavimą. Tai yra kryptinė grafo briauna, kuri jungia duomenų objektus ir žinutes su juos sukuriančiomis arba naudojančiomis veiklomis. Duomenų srautas į objektą ar žinutę rodo, kad tai yra veiklos išeiga, priešingu atveju tai yra veiklos įeiga, duomenys reikalingi jai įvykdyti. Vaizduojama (\ref{img:bpm_components_message} pav.) punktyrine linija su rodykle rodančia kryptį.

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/bpm-components/group}
	\caption{Grupės žymėjimo pavyzdys}
	\label{img:bpm_components_group}
\end{figure}

Grupė (group) skirta nurodyti modelio komponentų kategorijas. Ji neturi įtakos sekų ar duomenų srautams, o tik pasako kas priklauso tai pačiai kategorijai. Vaizdavimas diagramoje yra komponentų apibraukimas ir grupės pavadinimo nurodymas (\ref{img:bpm_components_group} pav.).

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/bpm-components/text_annotation}
	\caption{Komentaro žymėjimo pavyzdys}
	\label{img:bpm_components_text_annotation}
\end{figure}

Komentaras (text annotation) yra mechanizmas skirtas pateikti papildomai informacijai diagramos skaitytojams. Šis komponentas neįtakoja sekos ar duomenų srautų, o tik paaiškina kas ir kodėl vyksta. Žymimas skliaustu iš kairės komentaro teksto pusės (\ref{img:bpm_components_text_annotation} pav.).

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/bpm-components/association}
	\caption{Asociacijos žymėjimo pavyzdys}
	\label{img:bpm_components_text_association}
\end{figure}

Asociacija (association) skirta komentarams susieti su modelio komponentais. Ji nurodo kuri diagramos dalis yra komentuojama. Asociacija vaizduojama punktyrine linija (\ref{img:bpm_components_text_association} pav.).

\subsection{\textbf{BPMN} komponentų tarpusavio ryšiai}
Norint modeliuoti verslo procesus vien komponentų nepakanka, taip pat reikia žinoti ir kaip jie sąveikauja tarpusavyje. Tarpusavio ryšius gana neblogai apibūdina metamodelis. Šiame darbe jis bus dažnai naudojamas tam tikslui. Skyriuje \ref{section:bpmn_components} aprašytų komponentų sąveiką galima pavaizduoti (\ref{img:bpmn_metamodel} pav.) metamodeliu.

Šiame metamodelyje tipas BPMNModelis yra šakninis komponentas. Jis savyje laiko sekos viršūnes, sekos srautus, juostas, grupes, duomenų komponentus, duomenų srautus, komentarus ir asociacijas.
Komponentus metamodelyje galima suskirstyti į tris grupes: sekos komponentus, duomenų komponentus ir komentavimo komponentus. Sekos komponentams priklauso SekosElemento tipų hierarchija, duomenų komponentams priklauso DuomenųKomponento hierarchija ir DuomenųSrautas, komentavimui priklauso Komentaras ir Asociacija. Taigi galima iš eilės apibūdinti šias grupes iš kurių susideda \textbf{BPMN} modelis.

SekosViršūnė yra abstraktus tipas nurodantis, kad tai yra komponentai jungiami sekos srautais, tokie kaip Veikla, Sprendimas ir Įvykio subtipai. Jis išplėstas abstrakčiais tipais: SekosSrautoŠaltinis ir SekosSrautoTikslas, nes kai kurios sekos viršūnės negali turėti ir įeinančius ir išeinančius sekos srautus. Pavyzdžiui komponentas PradžiosĮvykis gali turėti tik išeinančius, PabaigosĮvykis gali turėti tik įeinančius. Įvykis yra abstraktus tipas nes modelyje būna kurie nors iš jo subtipų. Sekos srautas turi vieną šaltinį ir vieną tikslą. Grupės ir Juostos nurodo kurios sekos viršunės joms priklauso. Juosta dar gali turėti linijų. Metamodelyje taip pat parodoma, kad Veikla gali būti Subprocesas, tokiu būdu savyje laikydama kitą procesą. DuomenųSrautoElementas yra abstraktus tipas parodantis, kad jo subtipai gali būti jungiami duomenų srautais. Įvestas abstraktus tipas DuomenųKomponentas norint apibendrinti PraneŠimą ir DuomenųObjektą. Komentaras jungiamas Asociacija ir gali komentuoti sekos komponentus.

\begin{figure}[H]
	\centering
	\includegraphics[width=\textwidth]{img/bpmn_metamodel}
	\caption{BPMN pagrindinių komponentų metamodelis}
	\label{img:bpmn_metamodel}
\end{figure}


\section{Detalizuotas vertės grandinės modelis}
BPMN modelyje galima pastebėti įmonės valdymo veiklų supratimo neapibrėžtumus \cite{bpmnPorterModel}. Taip yra todėl, kad išorinio modeliavimo metodai neparodo informacijos arba resursų transformavimo priežasčių. Tačiau įmonę galima analizuoti ir transakcinių darbų sekų modelio (\ref{img:pdca} pav) požiūriu.  
\begin{figure}[H]
	\centering
	\includegraphics[width=10cm]{img/pdca}
	\caption{Save valdančio proceso pavyzdys}
	\label{img:pdca}
\end{figure} 

Darbe įmonės procesas bus nagrinėjamas kaip transakcijų visuma. Materialios veiklos atskiriamos nuo valdymo veiklų. $P_i$ žymi veiklos procesą, kuris transformuoja žaliavas, medžiagas, energiją ir formuoja materialią išeigą. $F_j$ yra veiklos valdymo funkcija, informacijos (duomenų, žinių) transformavimo veikla, būtina valdant procesą $P_i$. Modelis yra suskirstytas į valdymo transakcijas $ MT_{ij} = F_j \times P_i$. Tokiu būdu pateikiama daugiau informacijos apie įmonę. Diagrama bus vaizduojama kaip detalizuotas M. Porterio vertės grandinės modelis (\ref{img:detalized_porter_vcm} pav).

%TODO: show goles in diagram
\begin{figure}[H]
	\centering
	\includegraphics[height=8cm]{img/detalized_porter_vcm}
	\caption{Detalizuotas M. Porterio vertės grandinės modelis}
	\label{img:detalized_porter_vcm}
\end{figure} 

Valdymo funkcija $F_j$ gali būti suskaidyta smulkiau. (\ref{img:splitted_management_function} pav) parodytas pavyzdys kai $F_j$ susideda iš smulkesnių dalių $F_{j1}$, $F_{j2}$ ir $F_{j3}$. Kartu visa tai suteikia veiklos procesui $P_i$ valdymo duomenis kuriuos jis panaudoja vykdymui. Vėliau grąžinami būsenos duomenys, jie panaudojami valdymo funkcijoje ir ciklas kartojasi.

\begin{figure}[H]
	\centering
	\includegraphics[width=7cm]{img/splitted_management_function}
	\caption{Valdymo funkcijos $F_j$ išskaidymo pavyzdys}
	\label{img:splitted_management_function}
\end{figure} 


\section{Užduočių diagrama}

1992 metais Ivar Jacobson apibrėžė metodologiją specifikuoti vartojimo atvejus \cite{Jacobson1992}. Jis pateikė būdą apibrėžti atvejus tiek tekstu (TODO: pav), tiek diagrama (TODO: pav). Tarp programų sistemų kūrėjų ši metodologija išpopuliarėjo kaip funkcinių reikalavimų apibrėžimo technika. \textbf{OMG} savo specifikacijose UML \cite{omgUmlFormal} ir SysML \cite{OMGSysML} standartizuoja vartojimo atvejų modelį ir priskiria jį prie elgsenos apibūdinimo diagramų..

\subsection{Užduočių diagramos apimtis}
Užduočių diagrama skirta apibūdinti kaip naudotojai siekia savo tikslų pasitelkdami sistemą. Ji parodo kokie yra funkciniai reikalavimai, naudotojų taksonomiją, duomenų srautus tarp naudotojų ir sistemos. Taip pat pateikia funkcijų hierarchijos modeliavimą ir leidžia jas suskaidyti (naudojant įtraukimo ryšį). Užduočių diagrama apibūdina funkcinius reikalavimus, ji nepateikia nei funkcijų atlikimo tvarkos, nei duomenų struktūrų naudojamų sistemoje.

\subsection{Užduočių diagramos komponentai} \label{section:use_cases_components}
Skirtingi šaltiniai pateikia kiek skirtingus komponentus ir jų apibrėžimus. Šiame darbe daugiausia taikomi \textbf{OMG} standartuose pateikti apibrėžimai. Toliau bus pateikiami UML standarte apibrėžtos užduočių diagramos komponentai.

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/use_case_components/actor}
	\caption{Aktoriaus žymėjimo pavyzdys}
	\label{img:use_case_components_actor}
\end{figure}

Aktorius (actor) žymi naudotojo rolę. Ją gali atlikti tiek žmogus, tiek išorinė programų sistema. Aktoriai sąveikauja su bendravimo kanalais prijungtais naudojimo atvejais. Šis komponentas žymimas žmogumi iš pagaliukų (\ref{img:use_case_components_actor} pav.).

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/use_case_components/use_case}
	\caption{Naudojimo atvejo žymėjimo pavyzdys}
	\label{img:use_case_components_use_case}
\end{figure}

Naudojimo atvejis (use case) žymi veiklų kurias atlikus gaunamas naudingas rezultatas aibę. Rezultatas gali būti naudingas tiek vykdytojui, tiek kitiems suinteresuotiems žmonėms. Šis komponentas vaizduojamas elipse (\ref{img:use_case_components_use_case} pav.),
naudojimo atvejo pavadinimas gali būti tiek elipsėje, tiek po ja.

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/use_case_components/association}
	\caption{Bendravimo kanalo žymėjimo pavyzdys}
	\label{img:use_case_components_communication_path}
\end{figure}

Bendravimo kanalas (communication path) žymi sąveika tarp aktoriaus ir sistemos. Šis komponentas diagramoje jungia aktorių su naudojimo atveju, taip parodydamas, kad prieš atlikdamas veiklas (sistemos funkcijas) naudotojas pateikia įvestį o po jų atlikimo gaunamas rezultatas. Jeigu bendravimo kanalo ryšio su aktoriumi gausa yra daugiau nei 1 reiškia naudojimo atvejui atlikti reikalingi keli vykdytojai, jeigu bendravimo kanalo ryšio su naudojimo atveju gausa yra daugiau nei 1 reiškia aktorius gali atlikti tas pačias veiklas daugiau nei vieną kartą. Asosijacija žymima solidžia linija (\ref{img:use_case_components_communication_path} pav.).

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/use_case_components/includes}
	\caption{Įtraukimo žymėjimo pavyzdys}
	\label{img:use_case_components_includes}
\end{figure}

Įtraukimas (includes) žymi naudojimo atvejo suskaidymą. Šis komponentas modeliuoja sąryši tarp dviejų vartojimo atvejų, taip parodydamas, kad įtraukiamo naudojimo atvejo veiklos yra atliekamos įtraukiančiame naudojimo atvejyje. Įtraukimą numatyta naudoti tuomet, kai tos pačios veiklos pasikartoja keliuose naudojimo atvejuose. Tos veiklos įdedamos į atskirą naudojimo atvejį ir prijungiamos šiuo ryšiu, tokiu būdu iškeliamas pasikartojantis funkcionalumas. Įtraukimas vaizduojamas punktyrine linija su rodykle  prie įtraukiamo naudojimo atvejo ir patikslinimu dvigubuose kampiniuose skliaustuose (\ref{img:use_case_components_includes} pav.).

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/use_case_components/extend}
	\caption{Išplėtimo žymėjimo pavyzdys}
	\label{img:use_case_components_extends}
\end{figure}

Išplėtimas (extends) žymi, kad esant tam tikroms sąlygoms naudojimo atvejis įtraukia veiklas iš kitų naudojimo atvejų. Šis komponentas numatytas naudoti bendram funkcionalumui iškelti, bet kitaip nei ryšys „Įtraukia“, parodo, kad veiklos įtraukiamos ne visada. Jis vaizduojamas punktyrine linija su rodykle prie išplečiamo naudojimo atvejo ir patikslinimu dvigubuose kampiniuose skliaustuose (\ref{img:use_case_components_extends} pav.).

\begin{figure}[H]
	\centering
	\includegraphics[width=5cm]{img/use_case_components/generalization}
	\caption{Apibendrinimo žymėjimo pavyzdys}
	\label{img:use_case_components_generalization}
\end{figure}

Apibendrinimas (generalization) žymi, kad elementas yra bendresnio elemento variantas. Nuo išplėtimo naudojimo atvejo apibendrinimas skiriasi tuo, kad pasakoma jog bent vienas iš apibendrinamų naudojimo atvejų funkcionalumų įtraukiamas į apibendrinančio naudojimo atvejo funkcionalumą. Žymimas solidžia linija su rodykle prie apibendrinamo naudojimo atvejo (\ref{img:use_case_components_generalization} pav.).

\subsection{ Užduočių diagramos komponentų tarpusavio ryšiai}

Komponentų aprašytų \ref{section:use_cases_components} skyriuje tarpusavio ryšiai  pavaizduoti metamodeliu (\ref{img:use_cases_metamodel} pav.). Jis sudarytas pagal UML ir SysML standartuose pateiktą informaciją. 

Užduočių diagrama yra paketas savyje laikantis aktorius, naudojimo atvejus, bendravimo kanalus, įtraukimus, išplėtimus ir apibendrinimus. Bendravimo kanalas jungia vieną aktorių su vienu naudojimo atveju. Įtraukimas yra ryšys tarp įtraukiamo ir įtraukiančio naudojimo atvejo. Išplėtimas jungia išplečiamą naudojimo atvejį su išplečiančiu. UML modelis leidžia abstraktaus tipo klasifikatoriaus apibendrinimą. Aktorius ir naudojimo atvejis yra klasifikatoriaus subtipai, todėl gali būti apibendrinti.

\begin{figure}[H]
	\centering
	\includegraphics[width=\textwidth]{img/use_cases_metamodel}
	\caption{Užduočių diagramos metamodelis}
	\label{img:use_cases_metamodel}
\end{figure} 

\section{\textbf{UML} diagramų transformavimo algoritmai}
\subsection{ Algoritmas \textbf{BPMN} modeliui transformuoti į \textbf{Užduočių diagramą}} \label{section:use_cases_from_bpmn}
Literatųroje yra parašyta apie \textbf{vartojimo atvejų diagramos} išvedimą iš \textbf{BPMN} modelio \cite{algUseCasesFromBpmn}. Straipsnyje aprašytas algoritmas atlieka (\ref{eq:use_cases_from_bpmn}) transformaciją. Imamas modifikuotas \textbf{BPMN} modelis (\ref{eq:use_cases_from_bpmn:bpmn_elements}) ir tie \textbf{vartojimo atvejų diagramos} komponentai, kurie gali būti iš jo išvesti (\ref{eq:use_cases_from_bpmn:use_case_elements}). 
\begin{align}
&BPMNElements = \left\{Start,End,Role,Branch,Task,Transition\right\}; \label{eq:use_cases_from_bpmn:bpmn_elements} \\
\begin{split}
&UseCasesElements = \left\{Actor, Generalization, Association,Use Case,\right. \\
&\left. Include, Extension Point, Extend\right\}; \label{eq:use_cases_from_bpmn:use_case_elements}\\
\end{split} \\
&BPMN(BPMNModelElements) \Rightarrow UseCases(UseCasesElements); \label{eq:use_cases_from_bpmn}
\end{align}

Algoritmo autoriai pirmiausia siūlo surasti ryšius tarp modelių. Juostos atitinka aktorius. Užduotys tuo tarpu grupuojamos, kol nepasiekia maksimalaus skaičiaus vykdomų be pertraukos, priklausančių tai pačiai juostai ir pagaminančių rezultatą. Tokia grupė pavadinama žingsniu ir yra laikoma atitinkančia vartojimo atvejį.  Tuomet lieka surasti kaip dar galima būtų panaudoti informaciją, patikslinti ir suprastinti gautoms diagramoms.

Vėliau pristatomas algoritmas. Jis Pirmiausia sudėlioja užduotis į proceso žingsnius. Vėliau juostos tampa aktoriais, o žingsniai jose – vartojimo atvejais. Galiausiai pasikartojančios užduotis išimamos iš žingsnių ir prijungiamos bendravimo kanalu įtraukia arba išplečia pagal situaciją.

\section{\textbf{Užduočių diagramos} išvedimas iš \textbf{BPMN} modelio}

Šio darbo tikslas, algoritmas galintis gauti \textbf{užduočių diagramas} iš \textbf{BPMN} modelio, bus kuriamas pagal \ref{section:use_cases_from_bpmn} aprašytą algoritmo sukūrimo pavyzdį. Pirmiausia bus rasti ryšiai tarp diagramų, vėliau sukurtas būdas juos panaudoti, galiausiai panaudota likusi modelio informacija patikslinti ir suprastinti diagramoms.

\subsection{Ryšiai tarp \textbf{BPMN} ir \textbf{užduočių diagramų}} \label{section:relations_sd_bpmn}

Norint duomenis iš vieno modelio perkelti į kitą galima pasinaudoti ryšiais esančiais tarp jų.

\begin{center}
    \begin{longtable}{ | c | c |  c | c | c | c |}
    \caption{Ryšiai tarp \textbf{BPMN} ir \textbf{užduočių diagramų}}
	\label{tab:relations_sd_bpmn}
    \\ \hline 
     & 
     %\begin{turn}{-90}
     Aktorius 
     %\end{turn} 
     & 
     %\begin{turn}{-90}
     Vartojimo atvejis 
     %\end{turn}  
     & 
     %\begin{turn}{-90}
     Bendravimo kanalas 
     %\end{turn}  
     & 
     %\begin{turn}{-90}
     Įtraukia 
     %\end{turn} 
     & 
     %\begin{turn}{-90}
     Išplečia 
     %\end{turn} 
     \\ 
    \hline 
    Juosta & + & & + &  &  \\
    \hline
    Veikla  & & + & + & + & + \\
    \hline
    Transakcija & & + & & + & + \\
    \hline
    Sekos srautas  & &  & & & \\
    \hline
    Įvykis  & & & & & \\
    \hline 
    Duomenų objektas  & & & & & \\
    \hline
    Pranešimų srautas  & & & & & \\
    \hline
    Sprendimas  & & & & & \\
    \hline
    \end{longtable}
\end{center} 

\begin{enumerate}
	\item Aktorius – galima gauti iš informacijos esančios juostoje. 
	\item Vartojimo atvejis – gaunamas iš informacijos veiklose arba transakcijose. Vartojimo atvejis paprastai yra transakcijos tipo.
	\item Bendravimo kanalas – ryšys tarp juostos ir veiklų joje.
	\item Įtraukia – veiklos kurias apima transakcija.
	\item Išplečia – ryšys randamas kai veikla pasikartoja skirtingose transakcijose.
\end{enumerate} 

Rasti ryšiai taip pat parodo kurie komponentai bus imami ir kurie gaunami. Taigi galima apibrėžti algoritmo įvesties ir išvesties duomenis.

%Citavimo pavyzdžiai: cituojamas vienas šaltinis \cite{PvzStraipsnLt}; cituojami
%keli šaltiniai \cite{PvzStraipsnEn, PvzKonfLt, PvzKonfEn, PvzKnygLt, PvzKnygEn,
%PvzElPubLt, PvzElPubEn, PvzMagistrLt, PvzPhdEn}.

\subsection{Ryšių tarp diagramų panaudojimas transformacijai}

Rasti ryšiai parodo į kokius \textbf{BPMN} komponentus reikia žiūrėti išvedant \textbf{užduočių diagramos} dalis. Toliau peržiūrimi diagramos variantai ir sudėliojami konkretūs žingsniai kuriuos reikia atlikti. Galiausiai gaunamas pseudokodas (Pseudokodas \ref{lst:bpmn_to_uc_pseudocode}). Jo veikimas pažingsniui aprašomas, taip pat pavaizduotas (pav. \ref{img:algorythm_activity_diagram}).

\begin{figure}[H]
	\centering
	\caption{Algoritmo diagrama}
	\includegraphics[scale=0.5]{img/algorythm-activity-diagram}
	\label{img:algorythm_activity_diagram}
\end{figure} 

\renewcommand{\lstlistingname}{Pseudokodas}% Listing -> Algorithm
\renewcommand{\lstlistlistingname}{Pseudokodo fragmentai}% List of Listings -> List of Algorithms
\begin{enumerate}
	\item Iškviečiama funkcija useCasesFromBPMN (Pseudokodas \ref{lst:bpmn_to_uc_pseudocode}) paduodant jai \textbf{BPMN} modelį.
	\lstinputlisting[style=pseudocode, caption={\textbf{UML} \textbf{Užduočių diagramos} gavimo iš \textbf{BPMN} modelio algoritmo pseudokodas}, label={lst:bpmn_to_uc_pseudocode}]{algorythm-pseudocode/useCasesFromBPMN}
	\item Po duomenų inicializavimo pirmiausia imamas transakcijos procesas (eil. \ref{line:bpmn_to_uc_pseudocode_get_process}) ir gaunami sekos srautai jungiantys komponentus transakcijoje (eil. \ref{line:bpmn_to_uc_pseudocode_get_transactionSequenceFlows}). 
	\item Vėliau sukuriami vartojimo atvejai apibrėžiantys proceso valdymą (eil. \ref{line:bpmn_to_uc_pseudocode_get_processUsecases}) funkcija getUseCasesForProcess (Pseudokodas  \ref{lst:bpmn_to_uc_pseudocode_getUseCasesForProcess}).
	\lstinputlisting[style=pseudocode, caption={Funkcija getUseCasesForProcess}, label={lst:bpmn_to_uc_pseudocode_getUseCasesForProcess}]{algorythm-pseudocode/getUseCasesForProcess}
	\item Joje randami sekos srautai išeinantys iš proceso (eil. \ref{line:bpmn_to_uc_pseudocode_getUseCasesForProcess_get_processFlows}) ir kiekvienam iš jų rekursijos būdu surandami ciklai su procesu funkcija addCycledFlows (Pseudokodas  \ref{lst:bpmn_to_uc_pseudocode_addCycledFlows}). Kiekvienam iš cikle esančių sekos srautų sukuriamas vartojimo atvejis (eil. \ref{line:bpmn_to_uc_pseudocode_getUseCasesForProcess_get_processUsecases_begin} - \ref{line:bpmn_to_uc_pseudocode_getUseCasesForProcess_get_processUsecases_end}). Jų kolekcija ir yra (Pseudokodas  \ref{lst:bpmn_to_uc_pseudocode_getUseCasesForProcess}) grąžinamas rezultatas.
	\lstinputlisting[style=pseudocode, caption={Funkcija addCycledFlows}, label={lst:bpmn_to_uc_pseudocode_addCycledFlows}]{algorythm-pseudocode/addCycledFlows}
Minėta Funkcija (Pseudokodas  \ref{lst:bpmn_to_uc_pseudocode_addCycledFlows}) pirmiausia patikrina ar jau nėra ciklo su procesu ir jei taip patvirtina, kad parametras currentPath turi savyje kelia į procesą (eil. \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_isTargetProcess_begin} - \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_isTargetProcess_end}). Jei kelias užsiciklino grąžinamas neigiamas atsakymas (eil. \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_isGoingInCircles_begin} - \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_isGoingInCircles_end}), tai reiškia grįžimą atgal. Jei žingsnis veda į jau išsaugotą sėkmingą kelio atkarpą patvirtinamas jo teisingumas (eil. \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_isAlreadyFound_begin} - \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_isAlreadyFound_end}). Jei nei viena iš šių sąlygų nepasitvirtino paimami sekantys žingsniai  (eil. \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_getNextFlows}). Jų neradus pranešama apie aklavietę (eil. \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_isDeadEnd_begin} - \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_isDeadEnd_end}). Kol kas pažymima, kad žingsnis yra sėkmingas (eil. \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_soFarSoGood}) ir žengtas (eil. \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_takeStep}). Toliau ieškoma ciklų su procesu einant sekančiais sekos srautais (eil.  \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_continueRecursion_begin} - \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_continueRecursion_end}). Neradus nei vieno kelio į procesą ištrinamas pažymėjimas apie žingsnio teisingumą (eil.  \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_isPathFound_begin} - \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_isPathFound_end}). Kadangi keliai žengus šį žingsnį ištyrinėti grįžtama atgal (eil. \ref{line:bpmn_to_uc_pseudocode_addCycledFlows_stepBack}).
	\item (Pseudokodas \ref{lst:bpmn_to_uc_pseudocode_getUseCasesForProcess}) sukurti vartojimo atvejai pridedami prie jau gautų vartojimo atvejų kartu su ryšiais tarp jų funkcija addNewUsecases (Pseudokodas  \ref{lst:bpmn_to_uc_pseudocode_addNewUsecases}). 
\lstinputlisting[style=pseudocode, caption={Funkcija addNewUsecases}, label={lst:bpmn_to_uc_pseudocode_addNewUsecases}]{algorythm-pseudocode/addNewUsecases}	
Joje sukuriamas vartojimo atvejis visai transakcijai (eil. \ref{line:bpmn_to_uc_pseudocode_addNewUsecases_transactionUseCase}), pažiūrima kiek vartojimo atvejų rasta, jei vienas tai jo informacija išsaugoma į pagrindinį vartojimo atvejį (eil.  \ref{line:bpmn_to_uc_pseudocode_addNewUsecases_onlyMain_begin} - \ref{line:bpmn_to_uc_pseudocode_addNewUsecases_onlyMain_end}). Radus daugiau, jie išsaugomi kaip įeinantys į transakciją (eil.  \ref{line:bpmn_to_uc_pseudocode_addNewUsecases_addIncluded_begin} - \ref{line:bpmn_to_uc_pseudocode_addNewUsecases_addIncluded_end}). 
	\item Galiausiai randamos bendros funkcijos tarp transakcijų ir sukuriami apibendrinantys vartojimo atvejai (Pseudokodas  \ref{lst:bpmn_to_uc_pseudocode_addGeneralUseCases}).
	\lstinputlisting[style=pseudocode, caption={Funkcija addGeneralUseCases}, label={lst:bpmn_to_uc_pseudocode_addGeneralUseCases}]{algorythm-pseudocode/addGeneralUseCases}
	\item Jeigu liko nepanaudotų funkcijų, iš jų sukuriami vartojimo atvejai su perspėjimais (Pseudokodas \ref{lst:bpmn_to_uc_pseudocode_addUnusedCases}).
	\lstinputlisting[style=pseudocode, caption={Funkcija addUnusedCases}, label={lst:bpmn_to_uc_pseudocode_addUnusedCases}]{algorythm-pseudocode/addUnusedCases}
\end{enumerate} 

Atlikusi šio algoritmo veiksmus programa iš \ref{appendix:dvcm_window} priede pavaizduoto vertės grandinės modelio gauna \ref{appendix:use_cases_window} priede pavaizduotą \textbf{užduočių diagramą}.

%Iš diagramos \ref{img:bpmn} gaunama diagrama \ref{img:sequence}.

%\begin{figure}[H]
%	\centering
%	\includegraphics[scale=0.5]{img/bpmn_diagrama}
%	\caption{\textbf{BPMN} diagrama}
%	\label{img:bpmn}
%\end{figure} 
%\begin{figure}[H]
%	\centering
%	\includegraphics[scale=0.5]{img/sequence_example}
%	\caption{\textbf{užduočių diagramą} diagrama}
%	\label{img:sequence}
%\end{figure} 

%\subsection{Likusios informacijos panaudojimas suprastinti ar patikslinti diagramai}


\section{Programa \textbf{BPMN} transformacijai į \textbf{užduočių diagramą}}   


%Išvadose ir pasiūlymuose, nekartojant atskirų dalių apibendrinimų,
%suformuluojamos svarbiausios darbo išvados, rekomendacijos bei pasiūlymai.
\sectionnonum{Išvados}

%Šiame skyriuje pateikiamos išvados (reziume) anglų kalba.
\sectionnonum{Conclusions}


% bibliografija.bib faile. Šaltinių sąraše nurodoma panaudota literatūra,
% kitokie šaltiniai. Abėcėlės tvarka išdėstoma tik darbe panaudotų (cituotų,
% perfrazuotų ar bent paminėtų) mokslo leidinių, kitokių publikacijų
% bibliografiniai aprašai (šiuo punktu pasirūpina LaTeX). Aprašai pateikiami
% netransliteruoti.
\printbibliography[heading=bibintoc] % Literatūros šaltiniai aprašomi

\sectionnonum{Santrumpos}
Šiame darbe naudojami žymėjimai:
\begin{enumerate}
	\item \textbf{BPMN} – modeliavimo kalba, skirta pavaizduoti informaciją plačiai auditorijai. \textbf{BPMN} buvo sukurta ir dažniausia naudojama pavaizduoti verslo procesams \cite{bpmnFormal}.
	\item \textbf{UML} – modeliavimo kalba, skirta suteikti standartinį sistemos analizės, architektūros, veikimo ir kūrimo pavaizdavimą \cite{omgUmlFormal}.
	\item \textbf{Sekų diagrama} (angl. sequence diagram) – \textbf{UML} diagrama, skirta pavaizduoti žinučių tarp apibrėžtų objektų sekai tų objektų gyvavimo metu \cite{omgUmlFormal}.
	\item \textbf{Užduočių diagrama} (angl. use case diagram) – \textbf{UML} diagrama, skirta pavaizduoti pavaizduoti kaip gali būti naudojama programų sistema \cite{algUseCasesFromBpmn}.
	\item \textbf{OMG} (angl. Object Management Group) – atviras, tarptautinis ne pelno siekiantis technologijų standartų konsorciumas (https://www.omg.org/).
\end{enumerate}

% Prieduose gali būti pateikiama pagalbinė, ypač darbo autoriaus savarankiškai
% parengta, medžiaga. Savarankiški priedai gali būti pateikiami kompiuterio
% diskelyje ar kompaktiniame diske. Priedai taip pat vadinami ir numeruojami.
% Tekstas su priedais siejamas nuorodomis (pvz.: \ref{img:mlp}).
\appendix  % Priedai


\section{Vertės grandinės modelis programos lange} \label{appendix:dvcm_window}
\begin{figure}[H]
    \centering
    \includegraphics[scale=0.6]{img/dvcm_window}
%    \caption{Paveikslėlio pavyzdys}
%    \label{img:dvcm_window}
\end{figure}
\section{Transformuotas užduočių diagrama programos lange} \label{appendix:use_cases_window}
\begin{figure}[H]
    \centering
    \includegraphics[scale=0.6]{img/use_cases_window}
%    \caption{Paveikslėlio pavyzdys}
%    \label{img:use_cases_window}
\end{figure}

%\section{Eksperimentinio palyginimo rezultatai}
% tablesgenerator.com - converts calculators (e.g. excel) tables to LaTeX
%\begin{table}[H]\footnotesize
%  \centering
%  \caption{Lentelės pavyzdys}
%  {\begin{tabular}{|l|c|c|} \hline
%    Algoritmas & $\bar{x}$ & $\sigma^{2}$ \\
%    \hline
%    Algoritmas A  & 1.6335    & 0.5584       \\
%    Algoritmas B  & 1.7395    & 0.5647       \\
%    \hline
%  \end{tabular}}
%  \label{tab:table example}
%\end{table}
\end{document}
